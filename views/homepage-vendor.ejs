<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Aladin</title>
       
        <!-- CSS -->
        <link rel="stylesheet" href="/css/reset.css" />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
        <link rel="stylesheet" href="/css/homepage-vendor.css" />

        <!-- Favicon -->
        <link
            rel="apple-touch-icon"
            sizes="57x57"
            href="/favicon/apple-icon-57x57.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="60x60"
            href="/favicon/apple-icon-60x60.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="72x72"
            href="/favicon/apple-icon-72x72.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="76x76"
            href="/favicon/apple-icon-76x76.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="114x114"
            href="/favicon/apple-icon-114x114.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="120x120"
            href="/favicon/apple-icon-120x120.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="144x144"
            href="/favicon/apple-icon-144x144.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="152x152"
            href="/favicon/apple-icon-152x152.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="/favicon/apple-icon-180x180.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="192x192"
            href="/favicon/android-icon-192x192.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="/favicon/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="96x96"
            href="/favicon/favicon-96x96.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="/favicon/favicon-16x16.png"
        />
        <link rel="manifest" href="/favicon/manifest.json" />
        <meta name="msapplication-TileColor" content="#ffffff" />
        <meta
            name="msapplication-TileImage"
            content="/favicon/ms-icon-144x144.png"
        />
        <meta name="theme-color" content="#ffffff" />

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;500;600;700&family=Roboto+Serif:opsz,wght@8..144,400;8..144,500;8..144,600&display=swap"
            rel="stylesheet"
        />

        <!-- Font Awesome 5 -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
    </head>
    <body>
        <div class="d-flex main-vp">
            <!-- Side menu start-->
            <div class="sidebar d-flex flex-column flex-shrink-0 p-3 bg-light fixed-top" style="width: 280px;">
                <div class="d-flex justify-content-between align-items-center">
                    <a href="#" class="d-flex align-items-center link-dark text-decoration-none">
                    <img src="https://github.com/mdo.png" alt="" width="45" height="45" class="rounded-circle me-2">
                    <div>
                        <span class="text-secondary">Hello,</span>
                        <br>
                        <strong class="fs-5" name="vendorUsername"><%= user.businessName %></strong>
                    </div>
                    </a>
                    <a href="/" class="bi bi-box-arrow-right text-secondary fs-5"></a>
                </div>
                <br>
                <br>
                <div class="earning">
                    <span class="text-secondary">Earning</span>
                    <br>
                    <span class="fs-2"><strong>$0</strong></span>
                </div>
                <br>
                <hr>
                <ul class="nav nav-pills flex-column mb-auto">
                    <li class="nav-item product">
                        <a href="#product-page" class="nav-link selected text-black fs-5">
                            <i class="bi bi-box-seam me-2 fs-4"></i>
                            <strong>Products</strong>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#order-page" class="nav-link text-black fs-5">
                            <i class="bi bi-list-check me-2 fs-4"></i>
                            <strong>Orders <span class="noti ms-2"><%= orders.length %></span></strong>
                        </a>
                    </li>
                </ul>
                <div class="logo-container ">
                    <a href="/" class="d-flex justify-content-between align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none" style="width: 160px;">
                        <img src="/favicon/android-icon-48x48.png" alt="brand-logo">
                        <span class="fs-1" style="font-family: Dancing Script;">Aladin</span>
                    </a>
                    <span>Copyright<i class="fas fa-copyright px-2" style="font-weight: 100;"></i>Aladin</span>
                </div>
            </div>
            <div class="sidebar-toggler">
                <i class="bi bi-caret-right-fill"></i>
            </div>
            <!-- Side menu end-->

            <!-- Product Page start-->
            <div class="container-fluid rounded-page product-page-content" id="product-page">
                <nav class="d-flex justify-content-between align-items-center" style="padding: 2.5% 5% 0;">
                    <a class="navbar-brand"><strong class="fs-1">Products</strong>
                        <br>
                        <p class="text-secondary">Manage your products here</p>
                    </a>
                    <form class="search-form mt-1 d-none">
                        <a class="bi bi-search fs-6 text-black me-2" type="submit"></a>
                        <input class="search-bar" type="search" placeholder="Search anything..." aria-label="Search">
                    </form>
                    <a href="#" class="nav-link text-black fs-6">
                        <strong>View Your Account</strong>
                        <i class="bi bi-box-arrow-in-right ms-2 fs-5"></i>
                    </a>
                </nav>
                <br>
                <a href="#form-page" class="text-decoration-none"><button type="button" class="add-button">
                    <span class="add-button__text">Add Product</span>
                    <span class="add-button__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="svg"><line y2="19" y1="5" x2="12" x1="12"></line><line y2="12" y1="12" x2="19" x1="5"></line></svg></span>
                </button></a>
                <br>
                <div class="container-fluid">
                    <div class="rounded h-100 p-4">
                        <div class="table-responsive">
                            <table class="table table-bordered border-black table-hover">
                                <thead>
                                    <tr>
                                    <th scope="col" class="fs-5"><strong>Name</strong></th>
                                    <th scope="col" class="fs-5"><strong>Image</strong></th>
                                    <th scope="col" class="fs-5"><strong>Price</strong></th>
                                    <th scope="col" class="fs-5"><strong>Description</strong></th>
                                    <th scope="col" class="fs-5"><strong>Category</strong></th>
                                    <th scope="col" class="fs-5"><strong>Amount</strong></th>
                                    <th scope="col" class="fs-5"><strong>Action</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% products.forEach(product => { %>
                                        <% if (product.vendorUsername === user.businessName) { %>
                                            <tr>
                                                <td><%= product.name %></td>
                                                <td>
                                                    <% if (product.image.data) { %>
                                                        <img src="data:image/<%= product.image.contentType %>;base64,<%= product.image.data.toString('base64') %>" height="200px" width="200px"/>
                                                    <% } else { %>
                                                        <img src="/images/customer/clothes.png" height="200px" width="200px"/>
                                                    <% } %>
                                                </td>
                                                <td>$<%= product.price %></td>
                                                <td><%= product.description %></td>
                                                <td><%= product.category %></td>
                                                <td><%= product.amount %></td>
                                                <td>
                                                    <a class='text-decoration-none' href="/vendor/products/delete/<%= product._id %>/<%= user._id %>"><button class="delete-btn"><span class="delete-btn_text">Delete</span><span class="delete-btn_icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></span></button></a>
                                                </td>
                                            </tr>
                                        <% } %>
                                    <% }); %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Product Page end-->

            <!-- Form to add product start-->
            <div class="container-fluid rounded-page form-page-content" id="form-page">
                <nav class="d-flex justify-content-between align-items-center" style="padding: 2.5% 5% 0;">
                    <a class="navbar-brand"><strong class="fs-1">Product Form</strong>
                        <br>
                        <p class="text-secondary">Add your products here</p>
                    </a>
                    <form class="search-form mt-1 d-none">
                        <a class="bi bi-search fs-6 text-black me-2" type="submit"></a>
                        <input class="search-bar" type="search" placeholder="Search anything..." aria-label="Search">
                    </form>
                    <a href="#" class="nav-link text-black fs-6">
                        <strong>View Your Account</strong>
                        <i class="bi bi-box-arrow-in-right ms-2 fs-5"></i>
                    </a>
                </nav>
                <br>
                <div class="container d-flex justify-content-center form-container">
                    <form action="/vendor/products/add" method='post' class="d-flex flex-column">
                        <h2 class="text-secondary">Fill in the product information</h2>
                        <br>
                        <label class="fs-4 mb-2" for="name">Name</label>
                        <input  class = "form-input" type="text" name='name' id="name" required>
                        <br>
                        <label class="fs-4 mb-2" for="price">Price</label>
                        <input  class = "form-input" type="number" name='price' id="price" required>
                        <br>
                        <label class="fs-4 mb-2" for="category">Select Category</label>
                        <select class="form-input" name="category" id="category" required>
                            <option value="Fashion">Fashion</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Beauty Cosmetic">Beauty Cosmetic</option>
                            <option value="Sports & Outdoors">Sports & Outdoors</option>
                            <option value="Home & Kitchen">Home & Kitchen</option>
                            <option value="Health & Household">Health & Household</option>
                        </select>
                        <br>
                        <label class="fs-4 mb-2" for="description">Description</label>
                        <input  class = "form-input" type="text" name="description" id="description" required>
                        <br> 
                        <label class="fs-4 mb-2" for="amount">Amount</label>
                        <input  class = "form-input" type="number" name="amount" id="amount" required>
                        <br>
                        <label class="fs-4 mb-2" for="image">Upload Your Product's Image</label>
                        <input accept=".jpg, .jpeg, .png, .gif, .pdf" type="file" name="image" id="image" required>
                        <br>
                        <input class="d-none" type="text" name="vendorUsername" id="vendorUsername" value="<%= user.businessName %>">
                        <input type="hidden" name="vendorId" id="vendorId" value="<%= user._id %>">
                        <br>
                        <div class="d-flex justify-content-between">
                            <button class="form-btn" type="submit">Submit</button>
                            <button class="reset-form-btn" type="reset">Reset</button>
                        </div>
                        <a href="#product-page" class="back-btn text-black fs-6 text-decoration-none">
                            <i class="bi bi-arrow-left-square me-2 fs-5"></i>
                            <strong>Back to Product Page</strong>
                        </a>
                    </form>
                </div>
            </div>
            <!-- Form to add product end-->

            <!-- Order page start-->
            <div class="container-fluid rounded-page order-page-content" id="order-page">
                <nav class="d-flex justify-content-between align-items-center" style="padding: 2.5% 5% 0;">
                    <a class="navbar-brand"><strong class="fs-1">Orders</strong>
                        <br>
                        <p class="text-secondary">View your orders here</p>
                    </a>
                    <form class="search-form mt-1 d-none">
                        <a class="bi bi-search fs-6 text-black me-2" type="submit"></a>
                        <input class="search-bar" type="search" placeholder="Search anything..." aria-label="Search">
                    </form>
                    <a href="#" class="nav-link text-black fs-6">
                        <strong>View Your Account</strong>
                        <i class="bi bi-box-arrow-in-right ms-2 fs-5"></i>
                    </a>
                </nav>
                <br>
                <div class="container-fluid">
                    <div class="rounded h-100 p-4">
                        <div class="table-responsive">
                            <table class="table table-hover text-start order-table">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-secondary "><strong>ID</strong></th>
                                        <th scope="col" class="text-secondary "><strong>Products</strong></th>
                                        <th scope="col" class="text-secondary "><strong>Payment</strong></th>
                                        <th scope="col" class="text-secondary "><strong>Total</strong></th>
                                        <th scope="col" class="text-secondary "><strong>Receiver</strong></th>
                                        <th scope="col" class="text-secondary "><strong>Address</strong></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% let i = 1; %>
                                    <% orders.forEach(order => { %>
                                        <tr>
                                            <th class="order-id "scope="row"><%- `#INV-000${i++}` %></th>
                                            <td>
                                                <% order.products.forEach(product => { %>
                                                    <%= product %><br>
                                                <% }) %>                                          
                                            </td>
                                            <td><span class="cod"><%= order.payment %></span></td>
                                            <td><strong>$<%= order.total %></strong></td>
                                            <td><strong><%= order.receiver %></strong></td>
                                            <td><strong><%= order.address %></strong></td>
                                        </tr>
                                    <% }) %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Order page end-->
        </div>
        <section id="footer" class="bg-light" style="margin-left: 250px;">
            <div class="container">
                <footer class="py-3">
                <ul class="nav justify-content-center border-bottom pb-3 mb-3">
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Home</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Features</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Pricing</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
                    <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
                </ul>
                <p class="text-center text-muted">© 2022 Company, Inc</p>
                </footer>
            </div>
        </section>
        <!-- JavaScript -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"
        ></script>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
        <script src="/js/homepage-vendor.js"></script>
    </body>
</html>